{% extends 'student/base.html' %}
{% load static %}
{% block content %}

<style>
    .error{
        color: darkred;
        }
    </style>


    <div class="site-wrap" id="home-section">


    <div class="ftco-blocks-cover-1">
      <div class="">
        <div class="container">
          <div class="">

            <div class="col-md-5 mt-5 pt-5">
              <span class="text-cursive h5 text-red">edit </span>
              <h1 class="mb-3 font-weight-bold text-teal">Get In Touch</h1>
            </div>
            
          </div>
        </div>
      </div>
    </div>


    <div class="site-section bg-light" id="contact-section">
      <div class="container">
        <div class="row justify-content-center text-center">
        
      </div>
        <div class="row">
          <div class="col-lg-8 mb-5" >

            <form >
                {% csrf_token %}
              <div class="form-group row">

                <div class="col-md-6 mb-4 mb-lg-0">
                  <input type="text" class="form-control" id="student_name" name="student_name" value="{{student.student_name}}" placeholder="student_name" > 
                </div>
            

                
                <div class="col-md-6 mb-4 mb-lg-0">
                    <input type="text" class="form-control" id="parent_name" name="parent_name" value="{{student.parent_name}}" placeholder="parent_name" >
                  </div>
                  <br>

                  <div class="col-md-6 mb-4 mb-lg-0">
                    <input type="number" class="form-control" id="student_age" name="student_age" value="{{student.student_age}}" placeholder="student_age" >
                  </div>
               
                  <div class="col-md-6 mb-4 mb-lg-0">
                    <input type="email" class="form-control" id="email" name="email" value="{{student.user.email}}" placeholder="Email" >
                  </div> 

                  <div class="col-md-6 mb-4 mb-lg-0">
                    <input type="text" class="form-control" id="username" name="usernmae" value="{{student.user.username}}" placeholder="username" >
                  </div> 

                  <div class="col-md-6 mb-4 mb-lg-0">
                    <input type="tel" class="form-control" id="mobile_number" name="mobile_number" value="{{student.mobile_number}}" placeholder="mobile_number" >
                  </div>

                
                  
                <!-- <div class="col-md-6">
                  <input type="password" class="form-control" id="password1" name="password"  placeholder="Password" >
                </div> -->

                

                <div class="col-md-6">
                    <label for="exampleFormControlSelect1"    required="true">select class</label>
                    
                    <select class="form-control"  name="standard"   id="standard" >
                        {% for myclass in Myclass %}
                        
                        <option placeholder="select class" value="{{student.standard.standard}}"  >{{ myclass.standard }} </option>
                        
                        {% endfor %}
                    </select>
                  </div>

                  

                  <span id="error1" class="error" > </span>

                  
                 
                  <!-- <div class="card-body text-center">
                    <label class="card-title">AMOUNT DETAILS</label>
                   <b><h5 class="card-text">
                        Total Amount for your products :
                        <strong id="total-amount">{{Total}} </strong> rs
                    </h5></b>
                    <br>
                    <h6>duration : 10 month</h6>

                    <a href="">
                        <button style="background-color: rgb(46, 97, 17)" class="btn text-white">Place order</button>
                    </a>
                </div> -->

               
              </div>
                <div class="form-group row">
                    <div class="col-md-6 mr-auto">
                    <!-- <input type="submit" class="btn btn-block btn-primary text-white py-3 px-5" id="btn" value="Signup"> -->
                    <button type="button" id="btn" class="btn btn-block btn-primary text-white py-3 px-5" >Update</button>
                    </div>

                </div> 

                
              <!-- <div class="form-group row">
                <div class="col-md-12">
                  <textarea name="" id="" class="form-control" placeholder="Write your message." cols="30" rows="10"></textarea>
                </div>
              </div>  -->

            </form>

            <form>
                <h4>password Change</h4>


                  <div class="col-md-6">
                    <input type="password" class="form-control" id="old_password" name="old_password" placeholder="old_Password" >
                  </div>
                  <br>
                  <div class="col-md-6">
                    <input type="password" class="form-control" id="password1" name="password1" placeholder="new_Password" >
                  </div>
                  <br>
                  <div class="col-md-6">
                    <input type="password" class="form-control" id="password2" name="password2" placeholder="confirm_Password" >
                  </div>
            
                  <span id="error1" class="error" > </span>


                  <div class="form-group row">
                    <div class="col-md-6 mr-auto">
                    <!-- <input type="submit" class="btn btn-block btn-primary text-white py-3 px-5" id="btn" value="Signup"> -->
                    <button type="button" id="btn1" class="btn btn-block btn-primary text-white py-3 px-5" >Update</button>
                    </div>

                </div> 
                
            </form>



          </div>
          <!-- <div class="col-lg-4 ml-auto">
            <div class="bg-white p-3 p-md-5">
              <h3 class="text-black mb-4">Contact Info</h3>
              <ul class="list-unstyled footer-link">
                <li class="d-block mb-3">
                  <span class="d-block text-black">Address:</span>
                  <span>34 Street Name, City Name Here, United States</span></li>
                <li class="d-block mb-3"><span class="d-block text-black">Phone:</span><span>+1 242 4942 290</span></li>
                <li class="d-block mb-3"><span class="d-block text-black">Email:</span><span>info@yourdomain.com</span></li>
              </ul>
            </div>
          </div> -->
        </div>
      </div>
    </div>

    

    

    <footer class="site-footer">
      <div class="container">
       
        <div class="row pt-5 mt-5 text-center">
          <div class="col-md-12">
            <div class="border-top pt-5">
              <p>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart text-danger" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank" >Colorlib</a>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
            </div>
          </div>

        </div>
      </div>
    </footer>
    </div>

    <!-- <script>
        function sel(id){
            console.log("hlooo")
            $.ajax({
                url: '/select_standard/'+id,
                method: 'POST',

                
                success:function(data){
                    if(data=='true'){
                        window.location.reload()
                    }
                    $('#total-amount').innerhtml(data.Total)
                }
            })
        }
    </script> -->

    <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script> -->
	<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
	 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>   

	<script>
		$('#btn').click(function(){
	
			var student_name=$('#student_name').val()
			var parent_name=$('#parent_name').val()
			var student_age=$('#student_age').val()
			var mobile=$('#mobile_number').val()
			var email=$('#email').val()
			var atposition=email.indexOf('@')
			var dotposition=email.indexOf('.')
			//var password1=$('#password1').val()
			//var password2=$('#password2').val()
            var standard=$('#standard').val()
            var username=$('#username').val()
		
	
			var data = {
				'csrfmiddlewaretoken' : '{{csrf_token}}',
				'student1' :student_name,
				'parent1' :parent_name,
				'age1' :student_age,
        'mobile1' :mobile,
				'email1' :email,
				//'pass1' :password1,
				//'pass2' :password2,
        'standard1' :standard,
        'username1'  :username,           
	
			}
			if (student_name === ""){
				$('#error1').html("enter student name")
			}
			else if (parent_name === ""){
				$('#error1').html("enter parent name")
			}
			else if (student_age === ""){
				$('#error1').html("enter student age")
				console.log("haii")
			}
			else if (email === ""){
				$('#error1').html("enter email")
			}
			else if (atposition<2 ||dotposition<atposition+2 || dotposition+2>=email.length){
				$('#error1').html("enter enter valid email")
			}
			else if (mobile === ""){
				$('#erro1').html("enter mobile number")
			}
      else if (standard === ""){
        $('#error1').html("select standard")
      }
      else if (username === ""){
        $('#error1').html("enter username")
      }
			else{
				console.log('hiiiiiiiiiiiiiii')
				$.ajax({
					
					url:'/profile_edit/',
					method:'POST',
					data: data,
					dataType: 'json',
					
					success:function(data){
						if(data =="true"){
							alert("profile updated...");
							window.location.replace('/student_profile/')
						}
						else if (data == "false1"){
							$("#error1").html('username already exist')
						}
						else if (data == "false2"){
							$("#error1").html(' This email already exist')
						}
						else if (data == "false3"){
							$("#error1").html('This number already exist')
						}
						
	
					}
				})
			}
	
	
		})
	
	
	</script>


    <script>

        $('#btn1').click(function(){
            var password1= $('#password1').val()
            var password2= $('#password2').val()
            var old_password = $('#old_password').val()
            var password_length = $('#password1').val().length
     
            var data = {
             'csrfmiddlewaretoken' : '{{csrf_token}}',
             'password1' :password1,
             'passwords' :old_password
     
            }
     
            if (password_length<5){
                $('#error2').html('password contain 5 characters')
            }
            else if (password1!=password2){
                $('#error2').html('password does not match')
            }
     
            else{
     
             $.ajax({
                 url :'/editpassword/',
                 method :'POST',
                 data : data,
                 dataType : 'json',
                 success:function(data){
                     if(data=='true'){
                         alert("password changed")
                         window.location.replace('/student_profile/')
                         
                     }
                 }
             })
            }
        }) 
     
     </script>




   {% endblock %}
